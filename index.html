<!DOCTYPE html>
<html lang="no">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stedskart ‚Äî Lag vakre kartplakater av dine favorittplasser</title>
    <meta name="description"
        content="Lag personlige kartplakater i profesjonell kvalitet. Velg ditt favorittsted, tilpass design med 20+ fonter, farger og stiler. Gratis for Norge, globalt s√∏k med API.">

    <!-- OpenGraph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://barx10.github.io/ART-location/">
    <meta property="og:title" content="Stedskart ‚Äî Ditt sted, din kunst">
    <meta property="og:description"
        content="Lag personlige kartplakater i profesjonell kvalitet. Velg ditt favorittsted, tilpass design med 20+ fonter, farger og stiler.">
    <meta property="og:image" content="https://barx10.github.io/ART-location/preview.png">
    <meta property="og:site_name" content="Stedskart">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://barx10.github.io/ART-location/">
    <meta name="twitter:title" content="Stedskart ‚Äî Ditt sted, din kunst">
    <meta name="twitter:description"
        content="Lag personlige kartplakater i profesjonell kvalitet. Velg ditt favorittsted, tilpass design med 20+ fonter, farger og stiler.">
    <meta name="twitter:image" content="https://barx10.github.io/ART-location/preview.png">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%23c9a962'/%3E%3Cpath d='M50 25c-8.3 0-15 6.7-15 15 0 11.25 15 30 15 30s15-18.75 15-30c0-8.3-6.7-15-15-15zm0 20c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5z' fill='%230a0a0f'/%3E%3C/svg%3E">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=JetBrains+Mono:wght@400;500&family=Bebas+Neue&family=Oswald:wght@400;500;600;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Montserrat:wght@400;500;600;700;800&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Raleway:wght@400;500;600;700;800&family=Abril+Fatface&family=Cinzel:wght@400;500;600;700&family=Bodoni+Moda:ital,wght@0,400;0,700;1,400&family=Lora:ital,wght@0,400;0,700;1,400&family=Poppins:wght@400;500;600;700;800&family=Roboto+Slab:wght@400;500;700&family=Source+Serif+4:wght@400;600;700&family=Archivo+Black&family=Anton&family=Righteous&family=Staatliches&family=Permanent+Marker&family=Satisfy&display=swap"
        rel="stylesheet">

    <!-- External Libraries -->
    <!-- External Libraries -->
    <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- Application CSS -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/poster.css">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="stylesheet" href="css/animations.css">
</head>

<body>
    <div class="ambient-bg"></div>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <header class="sidebar-header">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" />
                        <circle cx="12" cy="10" r="3" />
                    </svg>
                </div>
                <div class="logo-text-wrapper">
                    <span class="logo-text">Stedskart</span>
                    <span class="logo-tagline">Ditt sted, din kunst</span>
                </div>
            </header>

            <div class="sidebar-content">
                <!-- Location Section -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-title">üìç Lokasjon</span>
                        <button class="random-btn" onclick="randomLocation()">üé≤ Tilfeldig</button>
                    </div>
                    <div class="input-group">
                        <div class="input-icon-wrapper" style="position: relative;">
                            <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            <input type="text" class="input" id="searchInput" placeholder="S√∏k etter by eller sted..."
                                autocomplete="off">
                            <div class="search-results" id="searchResults"></div>
                        </div>
                        <div style="font-size: 11px; color: var(--text-muted); margin-top: 6px; line-height: 1.4;">
                            üí° S√∏k etter steder i hele verden (OpenStreetMap)
                        </div>
                    </div>

                    <!-- Quick presets for popular Norwegian cities -->
                    <div class="quick-locations">
                        <button class="quick-loc-btn" onclick="selectLocation(59.9139, 10.7522, 'Oslo')">Oslo</button>
                        <button class="quick-loc-btn"
                            onclick="selectLocation(60.3913, 5.3221, 'Bergen')">Bergen</button>
                        <button class="quick-loc-btn"
                            onclick="selectLocation(63.4305, 10.3951, 'Trondheim')">Trondheim</button>
                        <button class="quick-loc-btn"
                            onclick="selectLocation(69.6496, 18.9560, 'Troms√∏')">Troms√∏</button>
                        <button class="quick-loc-btn"
                            onclick="selectLocation(68.2000, 14.0000, 'Lofoten')">Lofoten</button>
                    </div>
                </div>

                <!-- Style Section -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-title">üé® Kartstil</span>
                        <span class="section-badge">11 stiler</span>
                    </div>
                    <div class="style-grid" id="styleGrid">
                        <!-- Styles injected by JS -->
                    </div>

                    <!-- Advanced Color Customization -->
                    <div style="margin-top: 16px;">
                        <div class="toggle-row" style="cursor: pointer;" onclick="toggleAdvancedColors()">
                            <div class="toggle-info">
                                <div class="toggle-label">Avanserte farger</div>
                                <div class="toggle-desc">Tilpass individuelle kartelementer</div>
                            </div>
                            <div class="toggle-switch" id="toggleAdvancedColors"></div>
                        </div>

                        <div id="advancedColorsPanel" style="display: none; margin-top: 12px; padding: 12px; background: rgba(0,0,0,0.05); border-radius: 8px;">
                            <div class="input-group" style="margin-bottom: 12px;">
                                <label class="input-label">üíß Vann</label>
                                <div class="color-input-wrapper">
                                    <input type="color" class="color-picker" id="waterColorPicker" value="#a8d5f2">
                                    <input type="text" class="color-hex" id="waterColorHex" value="#a8d5f2" maxlength="7">
                                </div>
                            </div>
                            <div class="input-group" style="margin-bottom: 12px;">
                                <label class="input-label">üå≥ Parker</label>
                                <div class="color-input-wrapper">
                                    <input type="color" class="color-picker" id="parksColorPicker" value="#c8e6c9">
                                    <input type="text" class="color-hex" id="parksColorHex" value="#c8e6c9" maxlength="7">
                                </div>
                            </div>
                            <div class="input-group" style="margin-bottom: 12px;">
                                <label class="input-label">üõ£Ô∏è Veier</label>
                                <div class="color-input-wrapper">
                                    <input type="color" class="color-picker" id="roadsColorPicker" value="#757575">
                                    <input type="text" class="color-hex" id="roadsColorHex" value="#757575" maxlength="7">
                                </div>
                            </div>
                            <div class="input-group" style="margin-bottom: 12px;">
                                <label class="input-label">üè¢ Bygninger</label>
                                <div class="color-input-wrapper">
                                    <input type="color" class="color-picker" id="buildingsColorPicker" value="#eeeeee">
                                    <input type="text" class="color-hex" id="buildingsColorHex" value="#eeeeee" maxlength="7">
                                </div>
                            </div>
                            <div class="input-group">
                                <label class="input-label">‚õ∞Ô∏è Terreng</label>
                                <div class="color-input-wrapper">
                                    <input type="color" class="color-picker" id="terrainColorPicker" value="#d7ccc8">
                                    <input type="text" class="color-hex" id="terrainColorHex" value="#d7ccc8" maxlength="7">
                                </div>
                            </div>
                            <p style="font-size: 10px; color: var(--text-muted); margin-top: 8px; line-height: 1.3;">
                                üí° Se endringene live i forh√•ndsvisningen! Fargene p√•virker b√•de visning og eksport.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Perspective Section -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-title">üìê Format</span>
                    </div>
                    <div class="perspective-grid">
                        <button class="perspective-btn active" data-aspect="portrait" onclick="setAspect('portrait')">
                            <div class="perspective-icon">üì±</div>
                            <div class="perspective-label">Portrett</div>
                        </button>
                        <button class="perspective-btn" data-aspect="landscape" onclick="setAspect('landscape')">
                            <div class="perspective-icon">üñºÔ∏è</div>
                            <div class="perspective-label">Landskap</div>
                        </button>
                        <button class="perspective-btn" data-aspect="square" onclick="setAspect('square')">
                            <div class="perspective-icon">‚¨ú</div>
                            <div class="perspective-label">Kvadrat</div>
                        </button>
                    </div>
                </div>

                <!-- NEW: Map Details / Layers & Camera -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-title">üåç Kartlag & 3D</span>
                    </div>

                    <!-- Camera Controls -->
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label">Tilt (3D)</span>
                            <span class="slider-value" id="pitchValue">0¬∞</span>
                        </div>
                        <input type="range" class="slider" id="pitchSlider" min="0" max="60" value="0" step="5"
                            oninput="updateCamera('pitch', this.value)">
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label">Rotasjon</span>
                            <span class="slider-value" id="bearingValue">0¬∞</span>
                        </div>
                        <input type="range" class="slider" id="bearingSlider" min="0" max="360" value="0" step="15"
                            oninput="updateCamera('bearing', this.value)">
                    </div>

                    <!-- Layer Toggles -->
                    <div class="toggle-grid"
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 12px;">
                        <button class="layer-btn" id="btn-buildings3d" onclick="toggleLayer('buildings3d')">3D
                            Bygg</button>
                        <button class="layer-btn" id="btn-terrain" onclick="toggleLayer('terrain')">Terreng</button>
                        <button class="layer-btn" id="btn-contours"
                            onclick="toggleLayer('contours')">H√∏ydekurver</button>
                        <button class="layer-btn active" id="btn-water" onclick="toggleLayer('water')">Vann</button>
                        <button class="layer-btn active" id="btn-parks" onclick="toggleLayer('parks')">Parker</button>
                        <button class="layer-btn active" id="btn-streets"
                            onclick="toggleLayer('streets')">Veier</button>
                    </div>

                    <!-- Terrain & Hillshade Controls -->
                    <div class="slider-container" style="margin-top: 12px;">
                        <div class="slider-header">
                            <span class="slider-label">Terreng eksagering</span>
                            <span class="slider-value" id="terrainExaggerationValue">1.0√ó</span>
                        </div>
                        <input type="range" class="slider" id="terrainExaggerationSlider" min="0.5" max="5" value="1" step="0.1">
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label">Hillshade intensitet</span>
                            <span class="slider-value" id="hillshadeIntensityValue">0.7</span>
                        </div>
                        <input type="range" class="slider" id="hillshadeIntensitySlider" min="0" max="1" value="0.7" step="0.1">
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label">Solvinkel</span>
                            <span class="slider-value" id="hillshadeSunAngleValue">315¬∞</span>
                        </div>
                        <input type="range" class="slider" id="hillshadeSunAngleSlider" min="0" max="360" value="315" step="15">
                    </div>

                    <p style="font-size: 10px; color: var(--text-muted); margin-top: 8px; line-height: 1.3;">
                        ‚ÑπÔ∏è Disse valgene p√•virker b√•de forh√•ndsvisningen og den ferdige eksporten.
                    </p>
                </div>

                <!-- Zoom & Details -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-title">‚öôÔ∏è Innstillinger</span>
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label">Zoomniv√•</span>
                            <span class="slider-value" id="zoomValue">12</span>
                        </div>
                        <input type="range" class="slider" id="zoomSlider" min="8" max="16" value="12" step="0.5">
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label">Tekstst√∏rrelse</span>
                            <span class="slider-value" id="textSizeValue">100%</span>
                        </div>
                        <input type="range" class="slider" id="textSizeSlider" min="70" max="130" value="100" step="5">
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label">Bokstavmellomrom</span>
                            <span class="slider-value" id="letterSpacingValue">0.08</span>
                        </div>
                        <input type="range" class="slider" id="letterSpacingSlider" min="0" max="0.3" value="0.08" step="0.01">
                    </div>
                    <div class="slider-container" id="textPositionContainer">
                        <div class="slider-header">
                            <span class="slider-label">Horisontal posisjon</span>
                            <span class="slider-value" id="textXValue">50%</span>
                        </div>
                        <input type="range" class="slider" id="textXSlider" min="10" max="90" value="50" step="1">
                    </div>
                    <div class="slider-container" id="textYContainer">
                        <div class="slider-header">
                            <span class="slider-label">Vertikal posisjon</span>
                            <span class="slider-value" id="textYValue">85%</span>
                        </div>
                        <input type="range" class="slider" id="textYSlider" min="10" max="95" value="85" step="1">
                    </div>
                </div>

                <!-- Text Section -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-title">‚úèÔ∏è Tekst</span>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Tittel</label>
                        <input type="text" class="input" id="titleInput" value="Oslo" placeholder="Hovedtittel">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Undertittel</label>
                        <input type="text" class="input" id="subtitleInput" value="Norge" placeholder="Undertekst">
                    </div>
                </div>

                <!-- Font Section -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-title">üî§ Skrifttype</span>
                    </div>
                    <div class="font-grid" id="fontGrid">
                        <!-- Fonts injected by JS -->
                    </div>
                    <div class="input-group" style="margin-top: 16px;">
                        <label class="input-label">üé® Tekstfarge</label>
                        <div class="color-input-wrapper">
                            <input type="color" class="color-picker" id="textColorPicker" value="#2C2C2C">
                            <input type="text" class="color-hex" id="textColorHex" value="#2C2C2C" maxlength="7">
                        </div>
                    </div>
                </div>

                <!-- Text Theme Section -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-title">üìù Tekst-tema</span>
                        <span class="section-badge">5 temaer</span>
                    </div>
                    <div class="frame-grid" id="themeGrid">
                        <button class="frame-btn active" data-theme="none" onclick="setTextTheme('none')">
                            <div class="frame-preview">
                                <div class="frame-preview-inner"
                                    style="display: flex; align-items: flex-end; justify-content: center; padding-bottom: 4px; font-size: 8px;">
                                    Aa</div>
                            </div>
                            <span>Ingen</span>
                        </button>
                        <button class="frame-btn" data-theme="gradient" onclick="setTextTheme('gradient')">
                            <div class="frame-preview">
                                <div class="frame-preview-inner"
                                    style="background: linear-gradient(to bottom, transparent 30%, white 80%); display: flex; align-items: flex-end; justify-content: center; padding-bottom: 4px; font-size: 8px;">
                                    Aa</div>
                            </div>
                            <span>Gradient</span>
                        </button>
                        <button class="frame-btn" data-theme="box" onclick="setTextTheme('box')">
                            <div class="frame-preview">
                                <div class="frame-preview-inner"
                                    style="display: flex; align-items: flex-end; justify-content: center; padding-bottom: 8px;">
                                    <span
                                        style="background: white; border: 1px solid #333; padding: 2px 6px; font-size: 6px;">Aa</span>
                                </div>
                            </div>
                            <span>Boks</span>
                        </button>
                        <button class="frame-btn" data-theme="panel" onclick="setTextTheme('panel')">
                            <div class="frame-preview">
                                <div class="frame-preview-inner" style="position: relative;">
                                    <div
                                        style="position: absolute; bottom: 0; left: 0; right: 0; height: 35%; background: white; border-top: 1px solid #333; display: flex; align-items: center; justify-content: center; font-size: 6px;">
                                        Aa</div>
                                </div>
                            </div>
                            <span>Panel</span>
                        </button>
                        <button class="frame-btn" data-theme="double" onclick="setTextTheme('double')">
                            <div class="frame-preview">
                                <div class="frame-preview-inner" style="position: relative;">
                                    <div
                                        style="position: absolute; bottom: 0; left: 0; right: 0; height: 35%; background: white; border-top: 2px solid #333;">
                                    </div>
                                    <div
                                        style="position: absolute; bottom: 0; left: 0; right: 0; height: 30%; border-top: 1px solid #333; display: flex; align-items: center; justify-content: center; font-size: 6px;">
                                        Aa</div>
                                </div>
                            </div>
                            <span>Dobbel</span>
                        </button>
                    </div>
                    <div class="slider-container" id="themeSizeContainer" style="margin-top: 12px; display: none;">
                        <div class="slider-header">
                            <span class="slider-label">Tema-h√∏yde</span>
                            <span class="slider-value" id="themeSizeValue">30%</span>
                        </div>
                        <input type="range" class="slider" id="themeSizeSlider" min="15" max="60" value="30" step="5">
                    </div>
                </div>

                <!-- Frame Section -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-title">üñºÔ∏è Ramme</span>
                    </div>
                    <div class="frame-grid" id="frameGrid">
                        <button class="frame-btn active" data-frame="none" onclick="setFrame('none')">
                            <div class="frame-preview">
                                <div class="frame-preview-inner"></div>
                            </div>
                            <span>Ingen</span>
                        </button>
                        <button class="frame-btn" data-frame="thin" onclick="setFrame('thin')">
                            <div class="frame-preview">
                                <div class="frame-preview-inner" style="border: 1px solid var(--text-secondary);"></div>
                            </div>
                            <span>Tynn</span>
                        </button>
                        <button class="frame-btn" data-frame="thick" onclick="setFrame('thick')">
                            <div class="frame-preview">
                                <div class="frame-preview-inner" style="border: 3px solid var(--text-secondary);"></div>
                            </div>
                            <span>Tykk</span>
                        </button>
                        <button class="frame-btn" data-frame="double" onclick="setFrame('double')">
                            <div class="frame-preview">
                                <div class="frame-preview-inner" style="border: 2px double var(--text-secondary);">
                                </div>
                            </div>
                            <span>Dobbel</span>
                        </button>
                        <button class="frame-btn" data-frame="vintage" onclick="setFrame('vintage')">
                            <div class="frame-preview">
                                <div class="frame-preview-inner"
                                    style="border: 2px solid var(--text-secondary); box-shadow: inset 0 0 0 1px var(--text-secondary), inset 0 0 0 4px transparent, inset 0 0 0 5px var(--text-secondary);">
                                </div>
                            </div>
                            <span>Vintage</span>
                        </button>
                        <button class="frame-btn" data-frame="ornate" onclick="setFrame('ornate')">
                            <div class="frame-preview">
                                <div class="frame-preview-inner"
                                    style="border: 1px solid var(--text-secondary); box-shadow: inset 0 0 0 2px transparent, inset 0 0 0 3px var(--text-secondary);">
                                </div>
                            </div>
                            <span>Ornament</span>
                        </button>
                    </div>
                    <div class="input-group" style="margin-top: 16px;">
                        <label class="input-label">üé® Rammefarge</label>
                        <div class="color-input-wrapper">
                            <input type="color" class="color-picker" id="frameColorPicker" value="#2C2C2C">
                            <input type="text" class="color-hex" id="frameColorHex" value="#2C2C2C" maxlength="7">
                        </div>
                    </div>
                </div>

                <!-- Stickers Section -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-title">‚ú® Stickers</span>
                        <button class="section-badge" onclick="clearStickers()">Fjern alle</button>
                    </div>
                    <p style="font-size: 11px; color: var(--text-secondary); margin-bottom: 12px;">Klikk en sticker,
                        deretter klikk p√• kartet for √• plassere</p>
                    <div class="sticker-grid" id="stickerGrid">
                        <button class="sticker-btn" data-sticker="‚ù§Ô∏è" onclick="selectSticker('‚ù§Ô∏è')">‚ù§Ô∏è</button>
                        <button class="sticker-btn" data-sticker="üíï" onclick="selectSticker('üíï')">üíï</button>
                        <button class="sticker-btn" data-sticker="üíñ" onclick="selectSticker('üíñ')">üíñ</button>
                        <button class="sticker-btn" data-sticker="üíç" onclick="selectSticker('üíç')">üíç</button>
                        <button class="sticker-btn" data-sticker="üè†" onclick="selectSticker('üè†')">üè†</button>
                        <button class="sticker-btn" data-sticker="üìç" onclick="selectSticker('üìç')">üìç</button>
                        <button class="sticker-btn" data-sticker="‚≠ê" onclick="selectSticker('‚≠ê')">‚≠ê</button>
                        <button class="sticker-btn" data-sticker="üåü" onclick="selectSticker('üåü')">üåü</button>
                        <button class="sticker-btn" data-sticker="‚úàÔ∏è" onclick="selectSticker('‚úàÔ∏è')">‚úàÔ∏è</button>
                        <button class="sticker-btn" data-sticker="üéÑ" onclick="selectSticker('üéÑ')">üéÑ</button>
                        <button class="sticker-btn" data-sticker="üéÇ" onclick="selectSticker('üéÇ')">üéÇ</button>
                        <button class="sticker-btn" data-sticker="üë∂" onclick="selectSticker('üë∂')">üë∂</button>
                        <button class="sticker-btn" data-sticker="üêï" onclick="selectSticker('üêï')">üêï</button>
                        <button class="sticker-btn" data-sticker="üêà" onclick="selectSticker('üêà')">üêà</button>
                        <button class="sticker-btn" data-sticker="üå∏" onclick="selectSticker('üå∏')">üå∏</button>
                        <button class="sticker-btn" data-sticker="üå∫" onclick="selectSticker('üå∫')">üå∫</button>
                    </div>
                    <div class="slider-container" style="margin-top: 12px;">
                        <div class="slider-header">
                            <span class="slider-label">Sticker-st√∏rrelse</span>
                            <span class="slider-value" id="stickerSizeValue">40px</span>
                        </div>
                        <input type="range" class="slider" id="stickerSizeSlider" min="20" max="80" value="40" step="5">
                    </div>
                </div>

                <!-- Map Labels Section -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-title">üó∫Ô∏è Kartjusteringer</span>
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label">Fargemetning</span>
                            <span class="slider-value" id="mapSaturationValue">100%</span>
                        </div>
                        <input type="range" class="slider" id="mapSaturationSlider" min="0" max="200" value="100"
                            step="10">
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label">Kontrast</span>
                            <span class="slider-value" id="mapContrastValue">100%</span>
                        </div>
                        <input type="range" class="slider" id="mapContrastSlider" min="50" max="150" value="100"
                            step="5">
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label">Lysstyrke</span>
                            <span class="slider-value" id="mapBrightnessValue">100%</span>
                        </div>
                        <input type="range" class="slider" id="mapBrightnessSlider" min="50" max="150" value="100"
                            step="5">
                    </div>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span class="slider-label">Lys vignette</span>
                            <span class="slider-value" id="labelShadowValue">0px</span>
                        </div>
                        <input type="range" class="slider" id="labelShadowSlider" min="0" max="8" value="0" step="1">
                    </div>
                </div>

                <!-- Toggles Section -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-title">üîò Visning</span>
                    </div>
                    <div class="toggle-row">
                        <div class="toggle-info">
                            <div class="toggle-label">Vis stedsnavn</div>
                            <div class="toggle-desc">Byer, tettsteder, bydeler</div>
                        </div>
                        <div class="toggle-switch active" id="toggleLabels" onclick="toggleOption('labels')"></div>
                    </div>
                    <div class="toggle-row">
                        <div class="toggle-info">
                            <div class="toggle-label">Vis koordinater</div>
                            <div class="toggle-desc">Lat/Long under tittel</div>
                        </div>
                        <div class="toggle-switch active" id="toggleCoords" onclick="toggleOption('coords')"></div>
                    </div>
                    <div class="toggle-row">
                        <div class="toggle-info">
                            <div class="toggle-label">Vis skillelinjer</div>
                            <div class="toggle-desc">Dekorative linjer</div>
                        </div>
                        <div class="toggle-switch active" id="toggleLines" onclick="toggleOption('lines')"></div>
                    </div>
                    <div class="toggle-row">
                        <div class="toggle-info">
                            <div class="toggle-label">Vis dato</div>
                            <div class="toggle-desc">Spesiell dato under koordinater</div>
                        </div>
                        <div class="toggle-switch" id="toggleDate" onclick="toggleOption('date')"></div>
                    </div>
                    <div id="dateInputWrapper" style="display: none; margin-top: 8px;">
                        <input type="date" class="input" id="dateInput" onchange="updateDate()" oninput="updateDate()">
                    </div>
                </div>

                <!-- Export Section -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-title">üíæ Eksporter</span>
                    </div>
                    <div class="export-section">
                        <!-- API Key Input -->
                        <div class="input-group" style="margin-bottom: 16px;">
                            <label class="input-label">Carto-Art API-n√∏kkel (Premium)</label>
                            <div style="display: flex; gap: 8px;">
                                <input type="password" id="apiKeyInput" class="text-input"
                                    placeholder="Din Carto-Art n√∏kkel..." style="flex: 1; font-size: 12px;"
                                    onchange="saveApiKey(this.value)">
                                <button class="toggle-btn" onclick="toggleApiKeyVisibility()" title="Vis/skjul">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                </button>
                            </div>
                            <a href="https://cartoart.net/developer" target="_blank"
                                style="font-size: 11px; color: var(--accent); margin-top: 6px; display: inline-block;">
                                F√• API-n√∏kkel for 6K Print ‚Üí
                            </a>
                        </div>

                        <div class="export-quality">
                            <label class="input-label" style="margin-bottom: 10px; display: block;">Filformat</label>
                            <div class="quality-grid" style="grid-template-columns: 1fr 1fr; margin-bottom: 16px;">
                                <button class="quality-btn active" data-format="png" onclick="setExportFormat('png')">
                                    <span class="quality-name">PNG</span>
                                    <span class="quality-size">H√∏yeste kvalitet</span>
                                </button>
                                <button class="quality-btn" data-format="jpeg" onclick="setExportFormat('jpeg')">
                                    <span class="quality-name">JPEG</span>
                                    <span class="quality-size">Mindre filst√∏rrelse</span>
                                </button>
                            </div>

                            <label class="input-label" style="margin-bottom: 10px; display: block;">Oppl√∏sning</label>
                            <div class="quality-grid">
                                <button class="quality-btn" data-scale="2" onclick="setExportScale(2)">
                                    <span class="quality-name">Standard ‚úì</span>
                                    <span class="quality-size">~2400√ó3600</span>
                                </button>
                                <button class="quality-btn active" data-scale="4" onclick="setExportScale(4)">
                                    <span class="quality-name">H√∏y ‚ö°</span>
                                    <span class="quality-size">~4800√ó7200</span>
                                </button>
                                <button class="quality-btn" data-scale="6" onclick="setExportScale(6)">
                                    <span class="quality-name">Print ‚ö°</span>
                                    <span class="quality-size">~7200√ó10800</span>
                                </button>
                            </div>
                            <p style="font-size: 10px; color: var(--text-muted); margin-top: 8px; line-height: 1.4;">
                                üí° Standard fungerer uten API-n√∏kkel. H√∏y (4K) og Print (6K) krever API-n√∏kkel fra Carto Art.</p>
                        </div>
                        <button class="export-btn" onclick="exportPoster('png')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M12 15V3m0 12-4-4m4 4 4-4"></path>
                                <path d="M2 17v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2"></path>
                            </svg>
                            Last ned (valgt kvalitet)
                        </button>
                        <button class="export-btn secondary" onclick="exportSimple()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M12 15V3m0 12-4-4m4 4 4-4"></path>
                                <path d="M2 17v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2"></path>
                            </svg>
                            Rask eksport (uten API)
                        </button>
                    </div>
                </div>
            </div>

            <!-- Sidebar Footer -->
            <div class="sidebar-footer">
                <span class="footer-brand"><a href="https://www.laererliv.no/" target="_blank">L√¶rerliv</a> ¬©
                    2026</span>
            </div>
        </aside>

        <!-- Canvas Area -->
        <main class="canvas-area">
            <!-- Info Button -->
            <button class="info-btn" onclick="openInfoModal()" title="Om Stedskart (I)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 16v-4M12 8h.01"></path>
                </svg>
            </button>

            <!-- Toolbar -->
            <div class="canvas-toolbar">
                <button class="toolbar-btn" onclick="zoomCanvas(-0.1)" title="Forminsk lerret (-)">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="M21 21l-4.35-4.35M8 11h6"></path>
                    </svg>
                </button>
                <button class="toolbar-btn" onclick="zoomCanvas(0.1)" title="Forst√∏rr lerret (+)">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="M21 21l-4.35-4.35M11 8v6M8 11h6"></path>
                    </svg>
                </button>
                <div class="toolbar-divider"></div>
                <button class="toolbar-btn" onclick="resetMap()" title="Tilbakestill kart (R)">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                        <path d="M3 3v5h5"></path>
                    </svg>
                </button>
                <div class="toolbar-divider"></div>
                <button class="toolbar-btn" onclick="shareDesign()" title="Del design">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="18" cy="5" r="3"></circle>
                        <circle cx="6" cy="12" r="3"></circle>
                        <circle cx="18" cy="19" r="3"></circle>
                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                    </svg>
                </button>
            </div>

            <!-- Poster -->
            <div class="poster-container">
                <div class="poster-frame" id="posterFrame">
                    <!-- Corner decorations for ornate frame -->
                    <div class="corner-decor top-left"></div>
                    <div class="corner-decor top-right"></div>
                    <div class="corner-decor bottom-left"></div>
                    <div class="corner-decor bottom-right"></div>

                    <div class="poster-inner" id="posterInner">
                        <div class="map-wrapper" id="mapWrapper">
                            <div id="map"></div>
                            <div class="map-glow-overlay" id="mapGlowOverlay"></div>
                        </div>

                        <div class="poster-overlay">
                            <div class="poster-text" id="posterText">
                                <h1 class="poster-title" id="posterTitle">Oslo</h1>
                                <div class="poster-subtitle-wrapper" id="subtitleWrapper">
                                    <div class="poster-line" id="posterLine1"></div>
                                    <span class="poster-subtitle" id="posterSubtitle">Norge</span>
                                    <div class="poster-line" id="posterLine2"></div>
                                </div>
                                <p class="poster-coords" id="posterCoords">59.91¬∞ N, 10.75¬∞ E</p>
                                <p class="poster-date" id="posterDate" style="display: none;"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Loading overlay -->
                    <div class="loading-overlay" id="loadingOverlay">
                        <div class="spinner"></div>
                        <div class="loading-text">Laster kart...</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Info Modal -->
    <div class="modal-overlay" id="infoModal" onclick="closeInfoModal(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M12 16v-4M12 8h.01"></path>
                    </svg>
                    Om Stedskart
                </h2>
                <button class="modal-close" onclick="closeInfoModal()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h3>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                            <polyline points="2 17 12 22 22 17"></polyline>
                            <polyline points="2 12 12 17 22 12"></polyline>
                        </svg>
                        Hva er Stedskart?
                    </h3>
                    <p>Stedskart lar deg lage vakre, personlige kartplakater av dine favorittplasser. Perfekt som gave,
                        minne fra en spesiell reise, eller som unik veggdekorasjon.</p>
                    <p style="margin-top: 12px; font-size: 0.85rem; opacity: 0.7;">Kartdata ¬© <a
                            href="https://www.openstreetmap.org/copyright" target="_blank"
                            style="color: var(--accent);">OpenStreetMap</a> bidragsytere</p>
                </div>

                <div class="modal-section">
                    <h3>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path
                                d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z">
                            </path>
                        </svg>
                        Slik bruker du Stedskart
                    </h3>
                    <ul>
                        <li>S√∏k etter et sted eller velg fra hurtigknappene</li>
                        <li>Dra i kartet for √• justere posisjonen</li>
                        <li>Bruk scroll eller knappene for √• zoome</li>
                        <li>Velg kartstil, farger og ramme etter smak</li>
                        <li>Tilpass tekst, tittelst√∏rrelse og plassering</li>
                        <li>Eksporter som h√∏yoppl√∏selig PNG (4x)</li>
                    </ul>
                </div>

                <div class="modal-section">
                    <h3>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        Hurtigtaster
                    </h3>
                    <ul>
                        <li><span class="keyboard-shortcut">+</span> / <span class="keyboard-shortcut">-</span> ‚Äî Zoom
                            inn/ut</li>
                        <li><span class="keyboard-shortcut">R</span> ‚Äî Tilbakestill kart</li>
                        <li><span class="keyboard-shortcut">E</span> ‚Äî Eksporter plakat</li>
                        <li><span class="keyboard-shortcut">C</span> ‚Äî Kopier til utklippstavle</li>
                        <li><span class="keyboard-shortcut">I</span> ‚Äî √Öpne denne infoen</li>
                        <li><span class="keyboard-shortcut">Esc</span> ‚Äî Lukk dialog</li>
                    </ul>
                </div>

                <div class="modal-section">
                    <h3>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        Om skaperen
                    </h3>
                    <div class="about-creator">
                        <img src="logo.png" alt="L√¶rerliv logo" class="creator-logo"
                            onerror="this.style.display='none'">
                        <div class="creator-info">
                            <h4>Kenneth Bareksten</h4>
                            <p>L√¶rer og hobbyprogrammerer som lager digitale verkt√∏y for √• gj√∏re hverdagen litt enklere
                                og mer kreativ.</p>
                            <div class="creator-links">
                                <a href="https://www.laererliv.no/" target="_blank" class="creator-link">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="2" y1="12" x2="22" y2="12"></line>
                                        <path
                                            d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z">
                                        </path>
                                    </svg>
                                    www.laererliv.no
                                </a>
                                <a href="mailto:kenneth@laererliv.no" class="creator-link">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path
                                            d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z">
                                        </path>
                                        <polyline points="22,6 12,13 2,6"></polyline>
                                    </svg>
                                    kenneth@laererliv.no
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Application JavaScript -->
    <script src="js/constants.js"></script>
    <script src="js/state.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/map.js"></script>
    <script src="js/stickers.js"></script>
    <script src="js/poster.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/export.js"></script>
    <script src="js/main.js"></script>
</body>

</html>